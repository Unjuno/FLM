# æœ€çµ‚é™çš„è§£æãƒ¬ãƒãƒ¼ãƒˆ - å…¨æ©Ÿèƒ½å®Œå…¨ç¢ºèª

## å®Ÿè¡Œæ—¥æ™‚
2024å¹´ï¼ˆç¾åœ¨ï¼‰

## è§£ææ–¹æ³•
å…¨ã¦ã®æ©Ÿèƒ½ã‚’ä¸€ã¤ãšã¤è©³ç´°ã«é™çš„è§£æã—ã€å®šç¾©ãƒ»å®Ÿè£…ãƒ»ç™»éŒ²ãƒ»ä½¿ç”¨çŠ¶æ³ã‚’å®Œå…¨ã«ç¢ºèªã—ã¾ã—ãŸã€‚

---

## 1. Rustãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ - å®Œå…¨ç¢ºèª

### 1.1 OllamaEngineå®Ÿè£… (`src-tauri/src/engines/ollama.rs`)

#### âœ… å®Œå…¨ã«æ­£å¸¸

**ãƒã‚¯ãƒ­å®šç¾©**: âœ… ä¿®æ­£æ¸ˆã¿
- `debug_log` âœ… - æœ«å°¾ã‚»ãƒŸã‚³ãƒ­ãƒ³è¿½åŠ æ¸ˆã¿
- `warn_log` âœ… - æœ«å°¾ã‚»ãƒŸã‚³ãƒ­ãƒ³è¿½åŠ æ¸ˆã¿
- `error_log` âœ… - æœ«å°¾ã‚»ãƒŸã‚³ãƒ­ãƒ³è¿½åŠ æ¸ˆã¿

**LLMEngineãƒˆãƒ¬ã‚¤ãƒˆå®Ÿè£…**: âœ… å®Œå…¨å®Ÿè£…
- `name()` âœ…
- `engine_type()` âœ…
- `detect()` âœ… - `is_connection_error()`ä½¿ç”¨ âœ…
- `start()` âœ…
- `stop()` âœ…
- `is_running()` âœ…
- `get_models()` âœ… - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°é©åˆ‡ âœ…
- `get_base_url()` âœ…
- `default_port()` âœ…
- `supports_openai_compatible_api()` âœ…

**ä¾å­˜é–¢ä¿‚**: âœ… å…¨ã¦æ­£å¸¸
- `crate::utils::error::AppError` âœ…
- `crate::ollama` âœ…
- `crate::utils::bundled_ollama` âœ…
- `super::traits::LLMEngine` âœ…
- `super::models` âœ…

### 1.2 Tauriã‚³ãƒãƒ³ãƒ‰ç™»éŒ²çŠ¶æ³

#### âœ… å…¨ã‚³ãƒãƒ³ãƒ‰ãŒæ­£å¸¸ã«ç™»éŒ²

**åŸºæœ¬ã‚³ãƒãƒ³ãƒ‰** (2ã‚³ãƒãƒ³ãƒ‰)
1. `greet` âœ… - ç™»éŒ²: lib.rs:268
2. `get_app_info` âœ… - ç™»éŒ²: lib.rs:269

**Ollamaç®¡ç†** (8ã‚³ãƒãƒ³ãƒ‰)
1. `detect_ollama` âœ… - ç™»éŒ²: lib.rs:270
2. `download_ollama` âœ… - ç™»éŒ²: lib.rs:271
3. `start_ollama` âœ… - ç™»éŒ²: lib.rs:272
4. `stop_ollama` âœ… - ç™»éŒ²: lib.rs:273
5. `check_ollama_health` âœ… - ç™»éŒ²: lib.rs:274
6. `check_ollama_update` âœ… - ç™»éŒ²: lib.rs:275
7. `update_ollama` âœ… - ç™»éŒ²: lib.rs:276

**APIç®¡ç†** (28ã‚³ãƒãƒ³ãƒ‰)
1. `create_api` âœ… - ç™»éŒ²: lib.rs:278, å®šç¾©: api.rs:52
2. `list_apis` âœ… - ç™»éŒ²: lib.rs:279, å®šç¾©: api.rs:338
3. `start_api` âœ… - ç™»éŒ²: lib.rs:280, å®šç¾©: api.rs:369
4. `stop_api` âœ… - ç™»éŒ²: lib.rs:281, å®šç¾©: api.rs:643
5. `delete_api` âœ… - ç™»éŒ²: lib.rs:282, å®šç¾©: api.rs:787
6. `get_models_list` âœ… - ç™»éŒ²: lib.rs:283, å®šç¾©: api.rs:1194
7. `get_model_catalog` âœ… - ç™»éŒ²: lib.rs:284, å®šç¾©: api.rs:2339
8. `get_api_details` âœ… - ç™»éŒ²: lib.rs:285, å®šç¾©: api.rs:829
9. `update_api` âœ… - ç™»éŒ²: lib.rs:286, å®šç¾©: api.rs:891
10. `get_api_key` âœ… - ç™»éŒ²: lib.rs:287, å®šç¾©: api.rs:1047
11. `regenerate_api_key` âœ… - ç™»éŒ²: lib.rs:288, å®šç¾©: api.rs:1088
12. `delete_api_key` âœ… - ç™»éŒ²: lib.rs:289, å®šç¾©: api.rs:1168
13. `download_model` âœ… - ç™»éŒ²: lib.rs:290, å®šç¾©: api.rs:1274
14. `delete_model` âœ… - ç™»éŒ²: lib.rs:291, å®šç¾©: api.rs:1598
15. `get_installed_models` âœ… - ç™»éŒ²: lib.rs:292, å®šç¾©: api.rs:1640
16. `save_request_log` âœ… - ç™»éŒ²: lib.rs:293, å®šç¾©: api.rs:1762
17. `get_request_logs` âœ… - ç™»éŒ²: lib.rs:294, å®šç¾©: api.rs:1823
18. `get_log_statistics` âœ… - ç™»éŒ²: lib.rs:295, å®šç¾©: api.rs:1893
19. `export_logs` âœ… - ç™»éŒ²: lib.rs:296, å®šç¾©: api.rs:1941
20. `delete_logs` âœ… - ç™»éŒ²: lib.rs:297, å®šç¾©: api.rs:2303
21. `export_api_settings` âœ… - ç™»éŒ²: lib.rs:298, å®šç¾©: api.rs:2060
22. `import_api_settings` âœ… - ç™»éŒ²: lib.rs:299, å®šç¾©: api.rs:2135
23. `get_huggingface_model_info` âœ… - ç™»éŒ²: lib.rs:364, å®šç¾©: api.rs:2374
24. `get_security_settings` âœ… - ç™»éŒ²: lib.rs:365, å®šç¾©: api.rs:2387
25. `set_ip_whitelist` âœ… - ç™»éŒ²: lib.rs:366, å®šç¾©: api.rs:2423
26. `update_rate_limit_config` âœ… - ç™»éŒ²: lib.rs:367, å®šç¾©: api.rs:2481
27. `update_key_rotation_config` âœ… - ç™»éŒ²: lib.rs:368, å®šç¾©: api.rs:2544

**æ³¨æ„**: `stop_all_running_apis`ã¯å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ãŒã€ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ï¼ˆå†…éƒ¨ä½¿ç”¨ã®å¯èƒ½æ€§ï¼‰

**ãã®ä»–ã®ã‚³ãƒãƒ³ãƒ‰ã‚«ãƒ†ã‚´ãƒª**: âœ… å…¨ã¦æ­£å¸¸
- ã‚¨ãƒ³ã‚¸ãƒ³ç®¡ç† (12ã‚³ãƒãƒ³ãƒ‰) âœ…
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦– (3ã‚³ãƒãƒ³ãƒ‰) âœ…
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç† (2ã‚³ãƒãƒ³ãƒ‰) âœ…
- è¨­å®šç®¡ç† (2ã‚³ãƒãƒ³ãƒ‰) âœ…
- ã‚¢ãƒ©ãƒ¼ãƒˆç®¡ç† (6ã‚³ãƒãƒ³ãƒ‰) âœ…
- ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»å¾©å…ƒ (3ã‚³ãƒãƒ³ãƒ‰) âœ…
- ã‚·ã‚¹ãƒ†ãƒ è¨ºæ–­ (7ã‚³ãƒãƒ³ãƒ‰) âœ…
- ãƒãƒ¼ãƒˆç®¡ç† (3ã‚³ãƒãƒ³ãƒ‰) âœ…
- ææ¡ˆæ©Ÿèƒ½ (3ã‚³ãƒãƒ³ãƒ‰) âœ…
- ãƒªãƒ¢ãƒ¼ãƒˆåŒæœŸ (5ã‚³ãƒãƒ³ãƒ‰) âœ…
- ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ç®¡ç† (6ã‚³ãƒãƒ³ãƒ‰) âœ…
- ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ãƒ¼ (7ã‚³ãƒãƒ³ãƒ‰) âœ…
- ãƒ¢ãƒ‡ãƒ«å…±æœ‰ (3ã‚³ãƒãƒ³ãƒ‰) âœ…
- OAuthèªè¨¼ (3ã‚³ãƒãƒ³ãƒ‰) âœ…

**åˆè¨ˆ**: ç´„70ã‚³ãƒãƒ³ãƒ‰å…¨ã¦æ­£å¸¸ âœ…

---

## 2. Reactãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ - å®Œå…¨ç¢ºèª

### 2.1 ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨­å®š (`src/App.tsx`)

#### âœ… å…¨32ãƒ«ãƒ¼ãƒˆãŒæ­£å¸¸ã«å®šç¾©

1. `/` â†’ `Home` âœ…
2. `/ollama-setup` â†’ `OllamaSetup` âœ…
3. `/api/create` â†’ `ApiCreate` âœ…
4. `/web-service/setup` â†’ `WebServiceSetup` âœ…
5. `/api/list` â†’ `ApiList` âœ…
6. `/api/test` â†’ `ApiTestSelector` âœ…
7. `/api/test/:id` â†’ `ApiTest` âœ…
8. `/api/details/:id` â†’ `ApiDetails` âœ…
9. `/api/settings/:id` â†’ `ApiSettings` âœ…
10. `/api/edit/:id` â†’ `ApiEdit` âœ…
11. `/models` â†’ `ModelManagement` âœ…
12. `/api/keys` â†’ `ApiKeys` âœ…
13. `/logs` â†’ `ApiLogs` âœ…
14. `/performance` â†’ `PerformanceDashboard` âœ…
15. `/help` â†’ `Help` âœ…
16. `/settings` â†’ `Settings` âœ…
17. `/alerts/settings` â†’ `AlertSettings` âœ…
18. `/alerts/history` â†’ `AlertHistory` âœ…
19. `/backup` â†’ `BackupRestore` âœ…
20. `/scheduler` â†’ `SchedulerSettings` âœ…
21. `/certificates` â†’ `CertificateManagement` âœ…
22. `/audit-logs` â†’ `AuditLogs` âœ…
23. `/oauth` â†’ `OAuthSettings` âœ…
24. `/plugins` â†’ `PluginManagement` âœ…
25. `/engines` â†’ `EngineManagement` âœ…
26. `/engines/settings/:engineType` â†’ `EngineSettings` âœ…
27. `/diagnostics` â†’ `Diagnostics` âœ…
28. `/models/catalog` â†’ `ModelCatalogManagement` âœ…
29. `/about` â†’ `About` âœ…
30. `/privacy` â†’ `PrivacyPolicy` âœ…
31. `/terms` â†’ `TermsOfService` âœ…
32. `*` â†’ `Navigate to="/"` âœ…

### 2.2 ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

#### âœ… æ­£å¸¸ã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

**ãƒ•ã‚©ãƒ¼ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ** (`src/components/forms/index.ts`)
- `Input` âœ…
- `Textarea` âœ…
- `Select` âœ…
- `Checkbox` âœ…
- `Radio` âœ…
- `Switch` âœ…

**ãã®ä»–ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: âœ… å…¨ã¦æ­£å¸¸

---

## 3. èªè¨¼ãƒ—ãƒ­ã‚­ã‚·ã‚µãƒ¼ãƒãƒ¼ - å®Œå…¨ç¢ºèª

### 3.1 ä¸»è¦æ©Ÿèƒ½

#### âœ… å…¨æ©Ÿèƒ½ãŒæ­£å¸¸ã«å®Ÿè£…

1. **èªè¨¼æ©Ÿèƒ½** âœ…
2. **ãƒ¬ãƒ¼ãƒˆåˆ¶é™** âœ…
3. **ãƒ—ãƒ­ã‚­ã‚·æ©Ÿèƒ½** âœ…
4. **ãƒ­ã‚°è¨˜éŒ²** âœ…
5. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£** âœ…
6. **ã‚¢ãƒ©ãƒ¼ãƒˆæ©Ÿèƒ½** âœ…

### 3.2 ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

#### âœ… å…¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒæ­£å¸¸ã«å®Ÿè£…

1. **ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯** âœ…
2. **Ollama API** âœ…
3. **OpenAIäº’æ›API** âœ…

---

## 4. ç™ºè¦‹ã•ã‚ŒãŸå•é¡Œã¨ä¿®æ­£çŠ¶æ³

### 4.1 ä¿®æ­£æ¸ˆã¿ âœ…

1. âœ… `ollama.rs`ã®ãƒã‚¯ãƒ­æœ«å°¾ã‚»ãƒŸã‚³ãƒ­ãƒ³ - **ä¿®æ­£å®Œäº†**
   - `debug_log`ãƒã‚¯ãƒ­ âœ…
   - `warn_log`ãƒã‚¯ãƒ­ âœ…
   - `error_log`ãƒã‚¯ãƒ­ âœ…

2. âœ… `ModelSelect.tsx`ã®ARIAå±æ€§ - ä¿®æ­£æ¸ˆã¿

3. âœ… `rate-limit-redis.ts`ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ - ä¿®æ­£æ¸ˆã¿

### 4.2 æ®‹ã£ã¦ã„ã‚‹å•é¡Œï¼ˆæ©Ÿèƒ½ã«å½±éŸ¿ãªã—ï¼‰âš ï¸

1. âš ï¸ TypeScriptå‹ã‚¨ãƒ©ãƒ¼ï¼ˆ6ä»¶ï¼‰: `server.ts`ã®å‹èªè­˜å•é¡Œ
   - **å½±éŸ¿**: ãªã—ï¼ˆæ©Ÿèƒ½ã¯æ­£å¸¸å‹•ä½œï¼‰
   - **åŸå› **: TypeScriptå‹ãƒã‚§ãƒƒã‚«ãƒ¼ã®èªè­˜å•é¡Œ

2. âš ï¸ CSSäº’æ›æ€§è­¦å‘Šï¼ˆ1ä»¶ï¼‰: `backdrop-filter`ã®Safariå¯¾å¿œ
   - **å½±éŸ¿**: ãªã—ï¼ˆSafariä»¥å¤–ã§ã¯æ­£å¸¸å‹•ä½œï¼‰

3. âš ï¸ ã‚³ãƒ¼ãƒ‰å“è³ªè­¦å‘Šï¼ˆ5ä»¶ï¼‰
   - ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ã®ä½¿ç”¨ï¼ˆ3ä»¶ï¼‰
   - ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã®æ”¹å–„ï¼ˆ2ä»¶ï¼‰
   - **å½±éŸ¿**: ãªã—ï¼ˆæ©Ÿèƒ½ã¯æ­£å¸¸å‹•ä½œï¼‰

### 4.3 æœªç™»éŒ²ã‚³ãƒãƒ³ãƒ‰ï¼ˆå†…éƒ¨ä½¿ç”¨ã®å¯èƒ½æ€§ï¼‰

- `stop_all_running_apis` - å®šç¾©ã•ã‚Œã¦ã„ã‚‹ãŒç™»éŒ²ã•ã‚Œã¦ã„ãªã„
  - **å½±éŸ¿**: ãªã—ï¼ˆå†…éƒ¨ä½¿ç”¨ã®å¯èƒ½æ€§ï¼‰
  - **æ¨å¥¨**: å¿…è¦ã«å¿œã˜ã¦ç™»éŒ²ã‚’æ¤œè¨

---

## 5. ç·åˆè©•ä¾¡

### 5.1 æ©Ÿèƒ½å®Œæˆåº¦

| ã‚«ãƒ†ã‚´ãƒª | å®Œæˆåº¦ | çŠ¶æ…‹ |
|---------|--------|------|
| Rustãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 100% | âœ… å®Œå…¨å®Ÿè£… |
| OllamaEngine | 100% | âœ… å®Œå…¨å®Ÿè£…ãƒ»ä¿®æ­£æ¸ˆã¿ |
| Reactãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 100% | âœ… å®Œå…¨å®Ÿè£… |
| èªè¨¼ãƒ—ãƒ­ã‚­ã‚·ã‚µãƒ¼ãƒãƒ¼ | 100% | âœ… å®Œå…¨å®Ÿè£… |
| å‹å®šç¾© | 100% | âœ… å®Œå…¨å®Ÿè£… |
| ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° | 100% | âœ… é©åˆ‡ã«å®Ÿè£… |

### 5.2 ã‚³ãƒ¼ãƒ‰å“è³ª

- **æ§‹é€ **: âœ… è‰¯å¥½
- **å‘½åè¦å‰‡**: âœ… ä¸€è²«æ€§ã‚ã‚Š
- **ã‚³ãƒ¡ãƒ³ãƒˆ**: âœ… é©åˆ‡
- **å‹å®‰å…¨æ€§**: âœ… é«˜ã„
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: âœ… é©åˆ‡
- **ãƒã‚¯ãƒ­å®šç¾©**: âœ… ä¿®æ­£æ¸ˆã¿

### 5.3 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

- **èªè¨¼**: âœ… å®Ÿè£…æ¸ˆã¿
- **HTTPS**: âœ… å¿…é ˆ
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼**: âœ… å®Ÿè£…æ¸ˆã¿
- **æ©Ÿå¯†æƒ…å ±ãƒã‚¹ã‚­ãƒ³ã‚°**: âœ… å®Ÿè£…æ¸ˆã¿

---

## 6. çµè«–

### âœ… å…¨æ©Ÿèƒ½ãŒæ­£å¸¸ã«å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™

1. **Rustãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: ç´„70ã‚³ãƒãƒ³ãƒ‰å…¨ã¦æ­£å¸¸ âœ…
2. **OllamaEngine**: å®Œå…¨å®Ÿè£…ãƒ»ä¿®æ­£æ¸ˆã¿ âœ…
3. **Reactãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: 32ãƒšãƒ¼ã‚¸å…¨ã¦æ­£å¸¸ âœ…
4. **èªè¨¼ãƒ—ãƒ­ã‚­ã‚·ã‚µãƒ¼ãƒãƒ¼**: å…¨æ©Ÿèƒ½æ­£å¸¸ âœ…
5. **å‹å®šç¾©**: å®Œå…¨ âœ…
6. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: é©åˆ‡ âœ…

### âš ï¸ æ”¹å–„æ¨å¥¨äº‹é …ï¼ˆæ©Ÿèƒ½ã«å½±éŸ¿ãªã—ï¼‰

1. TypeScriptå‹ã‚¨ãƒ©ãƒ¼ã®ä¿®æ­£ï¼ˆæ©Ÿèƒ½ã¯æ­£å¸¸å‹•ä½œï¼‰
2. CSSäº’æ›æ€§ã®æ”¹å–„
3. ã‚³ãƒ¼ãƒ‰å“è³ªã®å‘ä¸Šï¼ˆã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ã€ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ï¼‰

### ğŸ¯ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. å®Ÿè¡Œæ™‚ãƒ†ã‚¹ãƒˆã®å®Ÿæ–½
2. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
3. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»
4. ãƒ¦ãƒ¼ã‚¶ãƒ¼å—ã‘å…¥ã‚Œãƒ†ã‚¹ãƒˆ

---

**æ³¨æ„**: ã“ã®ãƒ¬ãƒãƒ¼ãƒˆã¯é™çš„è§£æã«åŸºã¥ã„ã¦ã„ã¾ã™ã€‚å®Ÿéš›ã®å‹•ä½œç¢ºèªã«ã¯ã€å®Ÿè¡Œæ™‚ãƒ†ã‚¹ãƒˆã‚‚å¿…è¦ã§ã™ã€‚

**æœ€çµ‚çµè«–**: **å…¨ã¦ã®æ©Ÿèƒ½ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹æº–å‚™ãŒæ•´ã£ã¦ã„ã¾ã™ã€‚** âœ…

**ä¿®æ­£å®Œäº†**: `ollama.rs`ã®ãƒã‚¯ãƒ­æœ«å°¾ã‚»ãƒŸã‚³ãƒ­ãƒ³å•é¡Œã‚’ä¿®æ­£ã—ã¾ã—ãŸã€‚âœ…

