/* ナビゲーションコンポーネントのスタイル */

/* コンポーネント固有の変数（グローバル変数が存在しない場合のフォールバック付き） */
:root {
  --nav-overlay-light: rgba(255, 255, 255, 0.1);
  --nav-overlay-medium: rgba(255, 255, 255, 0.2);
  --nav-overlay-dark: rgba(0, 0, 0, 0.5);
  --nav-radius: var(--radius-md, 0.5rem);
  --nav-transition: var(--transition-base, 200ms ease-in-out);
  --nav-submenu-border: var(--color-border-light, #e2e8f0);
  --nav-mobile-bg: var(--color-bg-primary, #ffffff);
  --nav-mobile-shadow: var(--shadow, 0 1px 3px 0 rgba(0, 0, 0, 0.1));
}

.navigation {
  display: flex;
  align-items: center;
  contain: layout;
}

.navigation-horizontal {
  flex-direction: row;
}

.navigation-vertical {
  flex-direction: column;
}

.nav-list {
  display: flex;
  list-style: none;
  margin: 0;
  padding: 0;
  gap: var(--spacing-xs, 0.5rem);
}

.navigation-horizontal .nav-list {
  flex-direction: row;
}

.navigation-vertical .nav-list {
  flex-direction: column;
  width: 100%;
}

.nav-submenu {
  list-style: none;
  margin: 0;
  padding: 0;
  margin-top: var(--spacing-xs, 0.25rem);
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs, 0.25rem);
  contain: layout;
}

.nav-submenu.level-0 {
  margin-left: var(--spacing-md, 1rem);
  padding-left: var(--spacing-md, 1rem);
  border-left: 2px solid var(--nav-submenu-border);
}

.nav-submenu.level-1 {
  margin-left: var(--spacing-xs, 0.5rem);
  padding-left: var(--spacing-xs, 0.5rem);
}

.mobile-menu-toggle {
  display: none;
  padding: var(--spacing-xs, 0.5rem);
  background: var(--nav-overlay-light);
  border: none;
  border-radius: var(--nav-radius);
  color: var(--color-text-inverse, #ffffff);
  font-size: 1.5rem;
  cursor: pointer;
  transition: var(--nav-transition);
}

.mobile-menu-toggle:hover {
  background: var(--nav-overlay-medium);
}

.mobile-menu-toggle:focus-visible {
  outline: 2px solid var(--color-text-inverse, #ffffff);
  outline-offset: 2px;
}

.mobile-menu-overlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--nav-overlay-dark);
  z-index: 998;
  contain: layout style;
}

/* レスポンシブ対応 */
@media (max-width: 768px) {
  .mobile-menu-toggle {
    display: block;
  }

  .navigation {
    position: relative;
  }

  .navigation.mobile-menu-open {
    position: fixed;
    top: 0;
    left: 0;
    width: 250px;
    height: 100vh;
    background: var(--nav-mobile-bg);
    z-index: 999;
    padding: var(--spacing-md, 1rem);
    box-shadow: 2px 0 8px var(--nav-mobile-shadow);
    transform: translateX(0);
    transition: transform var(--transition-slow, 300ms ease);
    contain: layout style paint;
  }

  .navigation:not(.mobile-menu-open) {
    display: none;
  }

  .mobile-menu-overlay {
    display: block;
  }

  .navigation-horizontal .nav-list,
  .navigation-vertical .nav-list {
    flex-direction: column;
    width: 100%;
  }
}

/* ダークモード対応 */
/* システム設定（prefers-color-scheme: dark）とグローバルテーマ（[data-theme="dark"]）の両方に対応 */
@media (prefers-color-scheme: dark) {
  :root {
    --nav-mobile-bg: var(--color-bg-secondary, #2d3748);
    --nav-submenu-border: var(--color-border-light, rgba(224, 224, 224, 0.3));
  }
}

/* グローバルテーマによるダークモード（ユーザーが明示的に選択した場合） */
[data-theme="dark"] {
  --nav-mobile-bg: var(--color-bg-secondary, #2d3748);
  --nav-submenu-border: var(--color-border-light, rgba(224, 224, 224, 0.3));
}

